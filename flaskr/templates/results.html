<!doctype html>
<html>
<title>Results page</title>
<link rel=stylesheet type=text/css href="{{ url_for('static' , filename= 'styles.css') }}">
  <body>
    <div class=page>
      <h1>RESULTS</h1>
      <h2>TBD</h2>


      <div class ="row">
        <div class="column" style = "width: 50%;"> <h3>Interests</h3> 
          <ol>
            <form method = "POST">
              {% for a in range(0, len)%}
                <li>{{"favorite " + (catagories[a])|string + " is " + (interests[a])|string }}</li>
                
                <p>&#9; {{peoplelist[a]}} other people have your interest, this was the {{popularitylist[a][0]}} most popular response out of {{popularitylist[a][1]}} </p>
                <input type="checkbox" id={{ "insert" + a|string }} name={{ "interest" + a|string }} value="check" onclick="dynInput(this); ">
                <label for = {{ "insert" + a|string }}>add to interst {{a}} ? </label>
                
                <br>
              {%endfor%}
              <br>
              <div id="insertinputs"></div>
              <br>
              <input type = "submit" name = "submitentries" value = "submitentries" id = "results button">
            </form>
          </ol>    
      
    
        </div>
        <div class="column" style = "width:50%;">
          <h2>Extra information</h2>
          {% for a in range(0, len)%}
            <div class="box">
              {{extraa[a]}}
            </div>
          {%endfor%}
        </div>

      </div>

      
      
      </div>
    <br>
    <br>
    
    <h2>originality</h2>
    <div class="progress" >
      <div class="status" id = "progressslider" >
        <h2 id="innerStatus">Loading...</h2>
      </div>
    </div>
    <br>
    <br>

    <script>
      var i = 0;

     
      async function getStatus() {
        
        let get;
        //try to get information from json
        try {
          const res = await fetch("/results/status");
          get = await res.json();
        } catch (e) {
          console.error("Error: ", e);
        }

        i = 1;
        var id = setInterval(frame, 10);
        //element update
        var statusbar = get.status;
        document.getElementById("innerStatus").innerHTML = 1 * 1 + "&percnt;";

        widthmax = statusbar * 1;
        document.getElementById("progressslider").style.width = 1 + "%";
        width = 1;
        //$(".status").css({width: "100%",color: "blue"});
        //max status
        var id = setInterval(frame,15)
        function frame(){
          if(width < widthmax){
            width++;
            document.getElementById("progressslider").style.width = width + "%";
            document.getElementById("innerStatus").innerHTML = width * 1 + "&percnt;";

          }else{
            clearInterval(id);
          }
        }
        if (get.status == 100){
          
          clearTimeout(timeout);
          return false;
        }

        //timeout = setTimeout(getStatus, 1000);
      }
      //document.getElementById("progressslider").style.width = 100 * 1 + "%;";
      getStatus()

      function dynInput(cbox) {
        if (cbox.checked) {
          var input = document.createElement("textarea");
          input.type = "text";
          input.id = cbox.name + "t";
          input.name = cbox.name + "t";
          var div = document.createElement("div");
          div.id = cbox.name + "d";
          div.innerHTML = "Text to display for " + cbox.name;
          div.appendChild(input);
          document.getElementById("insertinputs").appendChild(div);
        } else {
          document.getElementById(cbox.name + "d").remove();
        }
      }

      //<textarea name = "textareaa1"></textarea>
      /*function dynInput(cbox) {
        if (cbox.checked) {
          var input = document.createElement("input");
          input.type = "text";
          input.name = cbox.name + "t";
          var div = document.createElement("div");
          input.id = cbox.name + "t";
          div.innerHTML = "input information for" + cbox.name;
          div.appendChild(input);
          document.getElementById("insertinputs").appendChild(div);
        } else {
          document.getElementById(cbox.name + "t").remove();
        }
      }*/
    
    </script>
  </body>
</html>