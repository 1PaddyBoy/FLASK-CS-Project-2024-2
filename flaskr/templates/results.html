<!doctype html>
<html>
<title>Results page</title>
<link rel=stylesheet type=text/css href="{{ url_for('static' , filename= 'styles.css') }}">
  <body>
    <div class=page>
      <h1>RESULTS</h1>
      <h2>TBD</h2>

      <ol>
      {% for a in range(1, len)%}

        <li>{{"favorite " + (combinations[a][0])|string + " is " + (combinations[a][1])|string }}</li>

      {%endfor%}
      <ol>
      <div class="progress" id = "progressslider">
        <div class="status" >
          <h2 id="innerStatus">Loading...</h2>
        </div>
      </div>
      <br>
      <br>
      
    </div>

    <script>
      async function getStatus() {
        let get;
        //try to get information from json
        try {
          const res = await fetch("/results/status");
          get = await res.json();
        } catch (e) {
          console.error("Error: ", e);
        }

        //element update
        document.getElementById("innerStatus").innerHTML = get.status * 1 + "&percnt;";
        document.getElementById("progressslider").style.width = get.status * 1 + "&percnt;";
        //max status
        if (get.status == 10){
          document.getElementById("innerStatus").innerHTML += " MAXIMUM BASIC";
          clearTimeout(timeout);
          return false;
        }

        timeout = setTimeout(getStatus, 1000);
      }
      getStatus()
    </script>
  </body>
</html>